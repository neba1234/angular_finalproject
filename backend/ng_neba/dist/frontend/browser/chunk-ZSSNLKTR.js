import{a as B,b as V,c as w,e as $}from"./chunk-VNVKHAHG.js";import{E as A,F as G,I,J as R,a as S,b as u,d as y,e as x,g as N,i as F,j as q,m as T,n as D}from"./chunk-RF5QDE44.js";import{e as M,j as b,l as h}from"./chunk-64FVLR2L.js";import"./chunk-WXI33M2S.js";import{a as k}from"./chunk-WGOEMV6R.js";import{a as C}from"./chunk-VY32DVZK.js";import{$ as d,Hb as a,Lb as v,Qa as l,da as g,gb as c,ib as f,mb as s,qb as t,rb as e,rc as E,sb as p,yb as _}from"./chunk-JFKBKRVP.js";function P(i,o){i&1&&(t(0,"mat-error"),a(1,"Name is required"),e())}function j(i,o){i&1&&(t(0,"mat-error"),a(1,"Medication name already exists"),e())}function H(i,o){i&1&&(t(0,"mat-error"),a(1,"Generic name is required"),e())}function L(i,o){i&1&&(t(0,"mat-error"),a(1,"Medication class is required"),e())}function z(i,o){i&1&&(t(0,"mat-error"),a(1,"Availability is required"),e())}var se=(()=>{let o=class o{constructor(){this.http=d(C),this.notification=d(b),this.navigation=d(M),this.medications=d(k).medications,this.form=d(T).group({name:["",[u.required],this.check_name_exists.bind(this)],generic_name:["",u.required],medication_class:["",u.required],availability:["",u.required],image:""})}onFileSelect(n){let r=n.target;r.files.length>0&&(this.file=r.files[0])}check_name_exists(n){return this.http.get(`${h.BACKEND_SERVER}/medications/by-name?name=${n.value}`)}submit(){let n=new FormData;n.append("name",this.form.get("name")?.value),n.append("generic_name",this.form.get("generic_name")?.value),n.append("medication_class",this.form.get("medication_class")?.value),n.append("availability",this.form.get("availability")?.value),n.append("medication_image",this.file),this.http.post(`${h.BACKEND_SERVER}/medications`,n).subscribe(r=>{r.success&&(this.notification.success("Added successfully"),this.form.reset(),this.navigation.navigate(["","med_route","medication-list"]))})}};o.\u0275fac=function(r){return new(r||o)},o.\u0275cmp=g({type:o,selectors:[["app-add-medicine"]],standalone:!0,features:[v],decls:28,vars:7,consts:[[1,"container"],[3,"ngSubmit","formGroup"],["appearance","fill"],["matInput","","placeholder","Enter medication name","formControlName","name"],["matInput","","placeholder","Enter generic name","formControlName","generic_name"],["matInput","","placeholder","Enter medication class","formControlName","medication_class"],["matInput","","placeholder","Enter availability","formControlName","availability"],["formControlName","image","type","file",3,"change"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(r,m){r&1&&(t(0,"div",0)(1,"h2"),a(2,"Add Medication"),e(),t(3,"form",1),_("ngSubmit",function(){return m.submit()}),t(4,"mat-form-field",2)(5,"mat-label"),a(6,"Name"),e(),p(7,"input",3),c(8,P,2,0,"mat-error")(9,j,2,0,"mat-error"),e(),t(10,"mat-form-field",2)(11,"mat-label"),a(12,"Generic Name"),e(),p(13,"input",4),c(14,H,2,0,"mat-error"),e(),t(15,"mat-form-field",2)(16,"mat-label"),a(17,"Medication Class"),e(),p(18,"input",5),c(19,L,2,0,"mat-error"),e(),t(20,"mat-form-field",2)(21,"mat-label"),a(22,"Availability"),e(),p(23,"input",6),c(24,z,2,0,"mat-error"),e(),t(25,"input",7),_("change",function(O){return m.onFileSelect(O)}),e(),t(26,"button",8),a(27," Submit "),e()()()),r&2&&(l(3),f("formGroup",m.form),l(5),s(m.form.controls.name.hasError("required")?8:-1),l(),s(m.form.controls.name.hasError("exists")?9:-1),l(5),s(m.form.controls.generic_name.hasError("required")?14:-1),l(5),s(m.form.controls.medication_class.hasError("required")?19:-1),l(5),s(m.form.controls.availability.hasError("required")?24:-1),l(2),f("disabled",m.form.invalid))},dependencies:[E,D,N,S,y,x,F,q,R,I,A,G,V,B,$,w],styles:[".container[_ngcontent-%COMP%]{max-width:600px;margin:auto;padding:20px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}"]});let i=o;return i})();export{se as MedicationaddComponent};
