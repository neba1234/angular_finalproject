import{a as C}from"./chunk-MICC35WZ.js";import{e as V,f as F,j as O}from"./chunk-64FVLR2L.js";import{a as T}from"./chunk-WGOEMV6R.js";import{a as S}from"./chunk-VY32DVZK.js";import{$ as r,Hb as s,Ib as g,Lb as M,Mb as f,Nb as h,Qa as m,da as b,gb as w,ib as p,la as l,ma as u,mb as k,nc as P,qb as c,ra as v,rb as a,vb as y,yb as _,zb as d}from"./chunk-JFKBKRVP.js";var q=()=>({"medication-container":!0}),E=()=>["","med_route","medication-detail"],L=i=>({medicationid:i});function j(i,o){if(i&1){let n=y();c(0,"div",0)(1,"a",1)(2,"div",2),s(3),a()(),c(4,"div",3)(5,"button",4),_("click",function(){l(n);let t=d();return u(t.delete())}),s(6,"Delete"),a(),c(7,"button",5),_("click",function(){l(n);let t=d();return u(t.update())}),s(8,"Update"),a(),c(9,"button",6),_("click",function(){l(n);let t=d();return u(t.addreview())}),s(10," Add Review "),a(),c(11,"button",6),_("click",function(){l(n);let t=d();return u(t.reviewlist())}),s(12," Review List "),a()()()}if(i&2){let n,e,t=d();p("ngClass",f(4,q)),m(),p("routerLink",f(5,E))("queryParams",h(6,L,(n=t.medication())==null?null:n._id)),m(2),g((e=t.medication())==null?null:e.name)}}function z(i,o){if(i&1&&(c(0,"div",0)(1,"a",1)(2,"div",2),s(3),a()()()),i&2){let n,e,t=d();p("ngClass",f(4,q)),m(),p("routerLink",f(5,E))("queryParams",h(6,L,(n=t.medication())==null?null:n._id)),m(2),g((e=t.medication())==null?null:e.name)}}var K=(()=>{let o=class o{constructor(){this.medication=v(),this.medications=r(T).medications,this.http=r(S),this.notification=r(O),this.jwtid=r(C).state()._id,this.route=r(V),this.is_loggedin=r(C).is_logged_in(),this.myid=this.medication()?._id}delete(){console.log(this.medications()),this.medication()?.added_by?.user_id===this.jwtid?this.http.delete(`http://localhost:3000/medications/${this.medication()?._id}`).subscribe(t=>{if(t.success){let x=this.medications().filter(R=>R._id!==this.medication()?._id);this.medications.set(x),this.notification.success("deleted success")}}):this.notification.error("your not authorized to delete")}update(){let e=this.medication()?._id;this.route.navigate(["","med_route","update",e],{queryParams:{id:this.medication()?._id}})}reviewlist(){this.route.navigate(["","med_route","medications",`${this.id}`,"review-list"])}addreview(){this.route.navigate(["","med_route","add-review"],{queryParams:{medicationid:this.medication()?._id}})}gotodetail(){this.route.navigate(["","med_route","medication-detail"],{queryParams:{medicationid:this.medication()?._id}})}get id(){return this.medication()?._id}};o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=b({type:o,selectors:[["app-medication"]],inputs:{medication:[1,"medication"]},standalone:!0,features:[M],decls:2,vars:1,consts:[[3,"ngClass"],[3,"routerLink","queryParams"],[1,"medication-name"],[1,"button-group"],[1,"action-button","delete",3,"click"],[1,"action-button","update",3,"click"],[1,"action-button","add-review",3,"click"]],template:function(t,x){t&1&&w(0,j,13,8,"div",0)(1,z,4,8,"div",0),t&2&&k(x.is_loggedin?0:1)},dependencies:[P,F],styles:[".medication-container[_ngcontent-%COMP%]{border-radius:10px;border:1px solid #ccc;background-color:#f9f9f9;width:75%;padding:15px;margin:10px auto;box-shadow:0 4px 8px #0000001a}.medication-name[_ngcontent-%COMP%]{font-size:1.2em;font-weight:700;margin-bottom:10px}.button-group[_ngcontent-%COMP%]{display:flex;gap:10px}.action-button[_ngcontent-%COMP%]{padding:8px 16px;font-size:.9em;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s}.action-button.delete[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff}.action-button.update[_ngcontent-%COMP%]{background-color:#3498db;color:#fff}.action-button.add-review[_ngcontent-%COMP%]{background-color:#2ecc71;color:#fff}.action-button[_ngcontent-%COMP%]:hover{opacity:.8}"]});let i=o;return i})();export{K as a};
