import{a as we,b as $,c as xe}from"./chunk-PEPPZLXG.js";import"./chunk-6WS57M4O.js";import"./chunk-OIBEWYWD.js";import{a as G,c as U}from"./chunk-ZM5K6NFS.js";import{a as V,b as q,c as M,d as Me,e as w}from"./chunk-VNVKHAHG.js";import{E as j,F as Se,I as B,J as L,a as A,b as u,d as P,e as N,g as k,i as R,j as T,m as D,n as O}from"./chunk-RF5QDE44.js";import{a as f}from"./chunk-MICC35WZ.js";import{a as ge,b as he,d as ye,e as I,f as ve,g as Ce,h as _e,j as F,k as be}from"./chunk-64FVLR2L.js";import"./chunk-WXI33M2S.js";import"./chunk-WGOEMV6R.js";import{b as ce,c as fe}from"./chunk-VY32DVZK.js";import{$ as s,Aa as te,Hb as m,Jb as se,Lb as S,Mb as E,Qa as d,Sa as ie,T as X,Ta as oe,Ub as de,V as Y,Va as re,Xa as ne,Ya as ae,Yb as pe,da as C,ga as K,gb as _,gc as ue,ib as c,la as Q,ma as ee,mb as h,qb as l,rb as a,sb as g,vb as le,yb as b,zb as me}from"./chunk-JFKBKRVP.js";var Te="@",De=(()=>{let e=class e{constructor(i,r,n,p,y){this.doc=i,this.delegate=r,this.zone=n,this.animationType=p,this.moduleImpl=y,this._rendererFactoryPromise=null,this.scheduler=s(oe,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-7YASX4UZ.js").then(r=>r)).catch(r=>{throw new X(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:n})=>{this._engine=r(this.animationType,this.doc);let p=new n(this.delegate,this._engine,this.zone);return this.delegate=p,p})}createRenderer(i,r){let n=this.delegate.createRenderer(i,r);if(n.\u0275type===0)return n;typeof n.throwOnSyntheticProps=="boolean"&&(n.throwOnSyntheticProps=!1);let p=new J(n);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(y=>{let x=y.createRenderer(i,r);p.use(x),this.scheduler?.notify(9)}).catch(y=>{p.use(n)}),p}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};e.\u0275fac=function(r){ie()},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let t=e;return t})(),J=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let o of this.replay)o(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,o){return this.delegate.createElement(e,o)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,o){this.delegate.appendChild(e,o)}insertBefore(e,o,i,r){this.delegate.insertBefore(e,o,i,r)}removeChild(e,o,i){this.delegate.removeChild(e,o,i)}selectRootElement(e,o){return this.delegate.selectRootElement(e,o)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,o,i,r){this.delegate.setAttribute(e,o,i,r)}removeAttribute(e,o,i){this.delegate.removeAttribute(e,o,i)}addClass(e,o){this.delegate.addClass(e,o)}removeClass(e,o){this.delegate.removeClass(e,o)}setStyle(e,o,i,r){this.delegate.setStyle(e,o,i,r)}removeStyle(e,o,i){this.delegate.removeStyle(e,o,i)}setProperty(e,o,i){this.shouldReplay(o)&&this.replay.push(r=>r.setProperty(e,o,i)),this.delegate.setProperty(e,o,i)}setValue(e,o){this.delegate.setValue(e,o)}listen(e,o,i){return this.shouldReplay(o)&&this.replay.push(r=>r.listen(e,o,i)),this.delegate.listen(e,o,i)}shouldReplay(e){return this.replay!==null&&e.startsWith(Te)}};function Z(t="animations"){return ne("NgAsyncAnimations"),K([{provide:re,useFactory:(e,o,i)=>new De(e,o,i,t),deps:[ue,ge,ae]},{provide:te,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}var v=class extends Error{};v.prototype.name="InvalidTokenError";function Oe(t){return decodeURIComponent(atob(t).replace(/(.)/g,(e,o)=>{let i=o.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i}))}function je(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return Oe(e)}catch{return atob(e)}}function Ee(t,e){if(typeof t!="string")throw new v("Invalid token specified: must be a string");e||(e={});let o=e.header===!0?0:1,i=t.split(".")[o];if(typeof i!="string")throw new v(`Invalid token specified: missing part #${o+1}`);let r;try{r=je(i)}catch(n){throw new v(`Invalid token specified: invalid base64 for part #${o+1} (${n.message})`)}try{return JSON.parse(r)}catch(n){throw new v(`Invalid token specified: invalid json for part #${o+1} (${n.message})`)}}var Fe=(()=>{let e=class e{constructor(){this.router=s(I),this.global=s(f),this.notification=s(F),this.form=s(D).group({email:["",[u.required,u.email]],password:["",[u.required,u.minLength(6)]]})}onsubmit(){return this.global.signin(this.form.value).subscribe(i=>{if(i.success){let r=Ee(i.data);console.log("this is signin",r),this.global.state.set({_id:r._id,fullname:r.fullname,email:r.email,jwt:i.data}),this.notification.success("signin success"),this.router.navigate(["","med_route","medications","medication-list"])}})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=C({type:e,selectors:[["app-signin"]],standalone:!0,features:[S],decls:14,vars:2,consts:[[3,"ngSubmit","formGroup"],["appearance","fill"],["matInput","","type","email","placeholder","email","formControlName","email"],["matInput","","type","password","placeholder","password","formControlName","password"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(r,n){r&1&&(l(0,"mat-card")(1,"h3"),m(2,"please sign in to add medications"),a(),l(3,"form",0),b("ngSubmit",function(){return n.onsubmit()}),l(4,"mat-form-field",1)(5,"mat-label"),m(6,"Email"),a(),g(7,"input",2),a(),l(8,"mat-form-field",1)(9,"mat-label"),m(10,"Password"),a(),g(11,"input",3),a(),l(12,"button",4),m(13," Sign In "),a()()()),r&2&&(d(3),c("formGroup",n.form),d(9),c("disabled",n.form.invalid))},dependencies:[O,k,A,P,N,R,T,q,V,B,j,w,M,L,U,G],styles:["mat-card[_ngcontent-%COMP%]{max-width:800px;margin:2em auto;padding:1em}mat-form-field[_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%]{width:100%;margin-top:1em}"]});let t=e;return t})();function Ge(t,e){t&1&&(l(0,"mat-error"),m(1," Full Name is required "),a())}function Ue(t,e){t&1&&(l(0,"mat-error"),m(1," Email is required "),a())}function $e(t,e){t&1&&(l(0,"mat-error"),m(1," Please enter a valid email "),a())}function Je(t,e){t&1&&(l(0,"mat-error"),m(1," Password is required "),a())}function ze(t,e){t&1&&(l(0,"mat-error"),m(1," Password must be at least 6 characters long "),a())}var Ae=(()=>{let e=class e{constructor(){this.global=s(f),this.router=s(I),this.notification=s(F),this.form=s(D).group({fullname:["",[u.required]],email:["",[u.required,u.email]],password:["",[u.required,u.minLength(6)]]})}submit(){this.form.invalid||this.global.signup(this.form.value).subscribe(i=>{i.success?(this.notification.success("Signup successful"),this.router.navigate(["","med_route","medication-list"])):this.notification.error("Signup failed")})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=C({type:e,selectors:[["app-signup"]],standalone:!0,features:[S],decls:23,vars:7,consts:[[3,"ngSubmit","formGroup"],["appearance","fill"],["matInput","","type","text","placeholder","Full Name","formControlName","fullname"],["matInput","","type","email","placeholder","Email","formControlName","email"],["matInput","","type","password","placeholder","Password","formControlName","password"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(r,n){if(r&1&&(l(0,"mat-card")(1,"h3"),m(2,"please sign up to add medications or add review"),a(),l(3,"form",0),b("ngSubmit",function(){return n.submit()}),l(4,"mat-form-field",1)(5,"mat-label"),m(6,"Full Name"),a(),g(7,"input",2),_(8,Ge,2,0,"mat-error"),a(),l(9,"mat-form-field",1)(10,"mat-label"),m(11,"Email"),a(),g(12,"input",3),_(13,Ue,2,0,"mat-error")(14,$e,2,0,"mat-error"),a(),l(15,"mat-form-field",1)(16,"mat-label"),m(17,"Password"),a(),g(18,"input",4),_(19,Je,2,0,"mat-error")(20,ze,2,0,"mat-error"),a(),l(21,"button",5),m(22," Signup "),a()()()),r&2){let p,y,x,W,H;d(3),c("formGroup",n.form),d(5),h((p=n.form.get("fullname"))!=null&&p.hasError("required")?8:-1),d(5),h((y=n.form.get("email"))!=null&&y.hasError("required")?13:-1),d(),h((x=n.form.get("email"))!=null&&x.hasError("email")?14:-1),d(5),h((W=n.form.get("password"))!=null&&W.hasError("required")?19:-1),d(),h((H=n.form.get("password"))!=null&&H.hasError("minlength")?20:-1),d(),c("disabled",n.form.invalid)}},dependencies:[O,k,A,P,N,R,T,q,V,B,j,Se,w,M,L,U,G,$],styles:["mat-card[_ngcontent-%COMP%]{width:800px;margin:2rem auto;padding:2rem}h1[_ngcontent-%COMP%]{text-align:center}mat-form-field[_ngcontent-%COMP%]{width:100%}"]});let t=e;return t})();var Pe=[{path:"",component:xe},{path:"signin",component:Fe},{path:"signup",component:Ae},{path:"med_route",loadChildren:()=>import("./chunk-Z6PTNXLX.js").then(t=>t.med_route)}];var Ne=(t,e)=>{let o=s(f);if(o.is_logged_in()){let i=t.clone({headers:t.headers.set("Authorization",`Bearer ${o.state().jwt}`)});return e(i)}else return e(t)};function Ze(){let t=s(f),e=localStorage.getItem("key");e&&t.state.set(JSON.parse(e))}var ke={providers:[pe({eventCoalescing:!0}),Ce(Pe,_e()),ce(fe([Ne])),{provide:de,useFactory:Ze},be(),Z(),Z()]};var We=()=>["med_route","add-medication"],He=()=>["signin"],Xe=()=>["signup"];function Ye(t,e){if(t&1){let o=le();l(0,"div")(1,"button",1),b("click",function(){Q(o);let r=me();return ee(r.global.signOut())}),l(2,"mat-icon"),m(3,"logout"),a(),m(4," Logout "),a(),l(5,"a",2),m(6,"Add Medication"),a()()}t&2&&(d(5),c("routerLink",E(1,We)))}function Ke(t,e){t&1&&(l(0,"div",0)(1,"a",3),m(2,"Sign In"),a(),l(3,"a",2),m(4,"Sign Up"),a()()),t&2&&(d(),c("routerLink",E(2,He)),d(2),c("routerLink",E(3,Xe)))}var Re=(()=>{let e=class e{constructor(){this.global=s(f)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=C({type:e,selectors:[["app-root"]],standalone:!0,features:[S],decls:5,vars:2,consts:[[1,"auth-links"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","accent",3,"routerLink"],["mat-flat-button","","color","primary",3,"routerLink"]],template:function(r,n){r&1&&(l(0,"h1"),m(1),a(),_(2,Ye,7,2,"div")(3,Ke,5,4,"div",0),g(4,"router-outlet")),r&2&&(d(),se("Welcome to ",n.global.state().fullname,"!"),d(),h(n.global.is_logged_in()?2:3))},dependencies:[ye,ve,$,we,w,Me,M],styles:["h1[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}div[_ngcontent-%COMP%], ng-template[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:10px}a[_ngcontent-%COMP%]{text-decoration:none}.auth-links[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:10px;margin-bottom:20px}"]});let t=e;return t})();he(Re,ke).catch(t=>console.error(t));
